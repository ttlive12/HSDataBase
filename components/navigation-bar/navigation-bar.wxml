<view class="weui-navigation-bar {{extClass}}">
  <view
    class="weui-navigation-bar__inner {{ios ? 'ios' : 'android'}} {{isDevtools ? 'devtools' : ''}}"
    style="{{displayStyle}}; {{innerPaddingRight}}; {{safeAreaTop}}"
  >
    <!-- 标题 -->
    <view class="weui-navigation-bar__center">
      <view
        wx:if="{{back}}"
        class="back-icon"
        bind:tap="handleBack"
      />
      <view
        wx:else
        class="hs-icon"
        bind:tap="handleBackHome"
      />
      <view class="title">
        <text class="main">{{title}}</text>
        <view
          id="setting"
          class="setting"
          wx:if="{{setting}}"
          bind:tap="onShow"
        >
          <image
            src="/assets/setting.svg"
            style="width: 35rpx; height: 35rpx; margin-top: 3rpx"
          />
          <text>{{wild ? '狂野模式' : '标准模式'}}</text>
        </view>
        <text
          wx:if="{{subTitle}}"
          class="sub"
          >{{subTitle}}</text
        >
        <!-- <text wx:else class="sub">{{currentMouth}}月{{currentDay}}日更新</text> -->
      </view>
    </view>
  </view>
</view>

<van-popup
  show="{{ show }}"
  closeable
  bind:close="onClose"
  round
  custom-style="width: 80%"
  z-index="10000"
>
  <view class="popup-container">
    <view class="mode">
      <image
        src="{{wild ? 'https://hs.res.netease.com/pc/zt/20241031162506/assets/wild_3a6668c1.png' : 'https://hs.res.netease.com/pc/zt/20241031162506/assets/standard_887a616e.png'}}"
        class="icon {{rotate ? 'rotate' : ''}}"
        bind:tap="handleSwitch"
      />
      <text class="mode-name">{{wild ? '狂野模式' : '标准模式'}}</text>
      <image
        src="/assets/switch.svg"
        style="width: 40rpx; height: 40rpx; padding: 15rpx; transform: translateX(-10rpx)"
        bind:tap="handleSwitch"
      />
    </view>

    <view class="card-container">
      <view
        class="item"
        style="width: 100%; margin-bottom: 20rpx"
      >
        <view class="header">
          <image
            src="/assets/deck_black.svg"
            style="width: 35rpx; height: 35rpx"
          />
          <text>服务器</text>
        </view>

        <view class="body">
          <van-radio-group
            value="{{ source }}"
            bind:change="onChangeSource"
            direction="horizontal"
          >
            <van-radio name="cn">国服</van-radio>
            <van-radio name="all">全部服务器</van-radio>
          </van-radio-group>
        </view>
      </view>

      <view
        class="item"
        style="width: 100%; margin-bottom: 20rpx"
      >
        <view class="header">
          <image
            src="/assets/deck_black.svg"
            style="width: 35rpx; height: 35rpx"
          />
          <text>数据源</text>

        </view>

        <view class="body">
          <van-radio-group
            value="{{ period }}"
            bind:change="onChangePeriod"
            direction="horizontal"
          >
            <van-radio name="default">最近补丁</van-radio>
            <van-radio name="past_day">最近三天</van-radio>
          </van-radio-group>
        </view>
      </view>

      <view class="item">
        <view class="header">
          <image
            src="/assets/clock.svg"
            style="width: 40rpx; height: 40rpx"
          />
          <text>数据更新</text>
        </view>
        <view class="body">
          <text>{{updateTime ? '最近更新时间' : '自动剔除老数据'}}</text>
          <text>{{updateTime ? updateTime : '每日自动更新'}}</text>
        </view>
      </view>

      <view class="item">
        <view class="header">
          <image
            src="/assets/feedback.svg"
            style="width: 40rpx; height: 40rpx"
          />
          <text>意见反馈</text>
        </view>
        <view class="body">
          <text>欢迎分享，评分</text>
          <button
            size="mini"
            plain="true"
            open-type="feedback"
            style="line-height: 45rpx"
          >
            前往反馈
          </button>
        </view>
      </view>

      <view
        class="item"
        style="width: 100%; margin-top: 20rpx"
      >
        <view class="header">
          <image
            src="/assets/update.svg"
            style="width: 40rpx; height: 40rpx"
          />
          <text>更新日志</text>
        </view>
        <view class="body">
          <text>当前版本：2.0.0</text>
          <text>更新内容：新增竞技场，玩家排行等</text>
        </view>
      </view>
    </view>
  </view>
</van-popup>
